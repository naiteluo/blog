<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>实现一个叫Man的类，包含attr, words, say三个方法</title>
</head>
<body>
    <p>打开console查看运行结果。</p>
<script type="text/javascript">

var Man;
//+++++++++++答题区域+++++++++++

Man = function (options) {

    // 两种调用方式 var p = Man(options); or var p = new Man(options);
    if (this.constructor !== Man) {
        return new Man(options);
    }

    // private variables 私有变量
    var fullname, 
        gender;

    // privilege functions 特权函数
    this.setFullname = function (_name) {
        fullname = _name;
    }
    this.setGender = function (_gender) {
        gender = _gender;
    }
    this.getFullname = function () {
        return fullname || '<用户未输入>';
    }
    this.getGender = function () {
        return gender || '<用户未输入>';
    }

    this.attr(options);
}

Man.prototype.attr = function () {
    var arg0,
        arg1;
    if (arguments.length === 1) {
        // getter 取值
        arg0 = arguments[0];
        if (typeof arg0 ==='string') {
            if (arg0 === 'fullname') {
                return this.getFullname();
            } else if (arg0 === 'gender') {
                return this.getGender();
            } else {
                return this[arg0] || '<用户未输入>';
            }
        // setter 批量赋值
        } else if (typeof arg0 === 'object') {
            for (key in arg0) {
                if (arg0.hasOwnProperty(key)) {
                    this.attr(key, arg0[key]);
                }
            }
            return;
        }
    // setter 名值对赋值
    } else if (arguments.length === 2) {
        arg0 = arguments[0];
        arg1 = arguments[1];
        if (arg0 === 'fullname') {
            this.setFullname(arguments[1]);
        } else if (arg0 === 'gender') {
            this.setGender(arg1);
        } else {
            this[arg0] = arg1;
        }
        return;
    }

    throw new Error('参数错误');
};

Man.prototype.words = function (str) {
    if (!this['words-limit'] || !this['words-emote']) {
        throw new Error('缺少words相关参数');
    }
    this['words-list'] = this['words-list'] || [];
    this['words-list'].push(str);
}

Man.prototype.say = function () {
    return this.getFullname() + this['words-emote'] + '：' + this['words-list'].slice(0, this['words-limit']).join('');
};

//+++++++++++答题结束+++++++++++

try{

    var me = Man({ fullname: "小红" });
    var she = new Man({ fullname: "小红" });

    console.group();
    console.info("我的名字是：" + me.attr("fullname") + "\n我的性别是：" + me.attr("gender"));
    console.groupEnd();
    /*------[执行结果]------

    我的名字是：小红
    我的性别是：<用户未输入>

    ------------------*/

    me.attr("fullname", "小明");
    me.attr("gender", "男");
    me.fullname = "废柴";
    me.gender = "人妖";
    she.attr("gender", "女");

    console.group();
    console.info("我的名字是：" + me.attr("fullname") + "\n我的性别是：" + me.attr("gender"));
    console.groupEnd();
    /*------[执行结果]------

    我的名字是：小明
    我的性别是：男

    ------------------*/

    console.group();
    console.info("我的名字是：" + she.attr("fullname") + "\n我的性别是：" + she.attr("gender"));
    console.groupEnd();
    /*------[执行结果]------

    我的名字是：小红
    我的性别是：女

    ------------------*/

    me.attr({
        "words-limit": 3,
        "words-emote": "微笑"
    });
    me.words("我喜欢看视频。");
    me.words("我们的办公室太漂亮了。");
    me.words("视频里美女真多！");
    me.words("我平时都看优酷！");

    console.group();
    console.log(me.say());
    /*------[执行结果]------

    小明微笑："我喜欢看视频。我们的办公室太漂亮了。视频里美女真多！"

    ------------------*/

    me.attr({
        "words-limit": 2,
        "words-emote": "喊"
    });

    console.log(me.say());
    console.groupEnd();
    /*------[执行结果]------

    小明喊："我喜欢看视频。我们的办公室太漂亮了。"

    ------------------*/

}catch(e){
    console.error("执行出错，错误信息: " + e);
}

</script>
</body>
</html>