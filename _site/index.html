<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<title>
		
			I Want To Code With You
		
	</title>

	<link rel="stylesheet" href="/stylesheets/styles.css">
	<link rel="stylesheet" href="/stylesheets/pygment_trac.css">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>
	<div class="wrapper">
		<header>
			<h1><a href="http://naiteluo.net">MMNN</a></h1>
			<p>naiteluo's blog</p>
			<p class="view">
				<a href="https://github.com/naiteluo/blog">View the Project on GitHub <small>naiteluo/naiteluo</small></a>
			</p>
			<ul style="display: block">
				<li><a href="#">Download <strong>ZIP File</strong></a></li>
				<li><a href="#">Download <strong>TAR Ball</strong></a></li>
				<li><a href="https://github.com/naiteluo/blog">View On <strong>GitHub</strong></a></li>
			</ul>
		</header>
		<section>
			<h1>I Want To Code With You</h1>

<h2>
	<a href="/2012-06-02/using-regular-expression-to-implement-at-some-like-weibo.html">
		用正则表达式检测微博中的at人
	</a>
</h2>
<!-- <pre><code>var msg = "@reelin @naiteluo 哈哈，六一儿童节快乐";
var list = msg.match(/ *@([\u4e00-\u9fa5A-Za-z0-9_]*) ?/g);
var msg = msg.replace(/ *@([\u4e00-\u9fa5A-Za-z0-9_]*) ?/g, '&lt;a href="#"&gt;$1&lt;/a&gt;');
</code></pre>
 -->
<!-- <pre><code>var msg = "@reelin @naiteluo 哈哈，六一儿童节快乐";
var list = msg.match(/ *@([\u4e00-\u9fa5A-Za-z0-9_]*) ?/g);
var msg = msg.replace(/ *@([\u4e00-\u9fa5A-Za-z0-9_]*) ?/g, '&lt;a href="#"&gt;$1&lt;/a&gt;');
</code></pre>
 -->
<em>Posted on 02 June 2012.</em>
<hr/>

<h2>
	<a href="/2012-06-02/javascript-the-definitive-guide-reading-notes-lexical-structure.html">
		JavaScript the Definitive Guide Reading notes Lexical Structure
	</a>
</h2>
<!-- 
 -->
<!-- 
 -->
<em>Posted on 02 June 2012.</em>
<hr/>

<h2>
	<a href="/2012-06-02/build-a-web-chat-room-with-nodejs-and-socketio.html">
		基于Node.JS与WebSocket的web聊天室
	</a>
</h2>
<!-- <h1>基于Node.JS与WebSocket的web聊天室</h1> <h2>应用描述</h2> <p><em>WebSocket</em> 作为HTML5的一个新特性，它的目的是为需要双向通信的基于浏览器的应用提供一个机制，不需要依靠建立多个HTTP连接即可实现双向通信。以前，web应用要在客户端和服务器建立双向连接的话，需要发送大量的http请求向服务器进行轮询，这导致了一些问题：</p> <ol> <li>为此，服务器需要为客户端使用多个的TCP连接；</li> <li>每个客户端给服务器端的请求都包含HTTP header，传输开销大；</li> <li>客户端编程复杂</li> </ol> <p>WebSocket是基于事件的，而Node.JS使用的则是事件驱动模型，直接使用javascript，代码编写更简单。另外，node.JS很高效，结合WebSocket，适合实时性要求很高的web应用，例如游戏，IM，监控程序等。</p> <p>我们的这次做的应用是使用Node.JS和Socket.IO实现的的Web聊天室，OnChat</p> <h2>开发环境及平台</h2> <p>开发环境： Mac OX X 10.7.3, Node.Js v0.6.11, npm v1.1.1<br/> 开发语言： JavaScript <br/> 开发框架： Express, Socket.IO <br/> 测试浏览器： Chrome 14+, Safari 5+</p> <h2>功能说明</h2> <p>主要实现功能： 登陆，即时聊天，类微博@人</p> <h3>应用界面</h3> <ul> <li><p>后台运行界面 <br/> <img src="https://github.com/naiteluo/Images/raw/master/snip/onchat1.png" alt="image" /></p></li> <li><p>程序前端界面 <br/> <img src="https://github.com/naiteluo/Images/raw/master/snip/onchat2.png" alt="image"... -->
<!-- <h1>基于Node.JS与WebSocket的web聊天室</h1>

<h2>应用描述</h2>

<p><em>WebSocket</em> 作为HTML5的一个新特性，它的目的是为需要双向通信的基于浏览器的应用提供一个机制，不需要依靠建立多个HTTP连接即可实现双向通信。以前，web应用要在客户端和服务器建立双向连接的话，需要发送大量的http请求向服务器进行轮询，这导致了一些问题：</p>

<ol>
<li>为此，服务器需要为客户端使用多个的TCP连接；</li>
<li>每个客户端给服务器端的请求都包含HTTP header，传输开销大；</li>
<li>客户端编程复杂</li>
</ol>


<p>WebSocket是基于事件的，而Node.JS使用的则是事件驱动模型，直接使用javascript，代码编写更简单。另外，node.JS很高效，结合WebSocket，适合实时性要求很高的web应用，例如游戏，IM，监控程序等。</p>

<p>我们的这次做的应用是使用Node.JS和Socket.IO实现的的Web聊天室，OnChat</p>

<h2>开发环境及平台</h2>

<p>开发环境： Mac OX X 10.7.3, Node.Js v0.6.11, npm v1.1.1<br/>
开发语言： JavaScript <br/>
开发框架： Express, Socket.IO <br/>
测试浏览器： Chrome 14+, Safari 5+</p>

<h2>功能说明</h2>

<p>主要实现功能： 登陆，即时聊天，类微博@人</p>

<h3>应用界面</h3>

<ul>
<li><p>后台运行界面  <br/>
  <img src="https://github.com/naiteluo/Images/raw/master/snip/onchat1.png" alt="image" /></p></li>
<li><p>程序前端界面 <br/>
  <img src="https://github.com/naiteluo/Images/raw/master/snip/onchat2.png" alt="image" /></p></li>
<li><p>登陆，及在线用户列表   <br/>
  <img src="https://github.com/naiteluo/Images/raw/master/snip/onchat3.png" alt="image" /></p></li>
<li><p>聊天
  <img src="https://github.com/naiteluo/Images/raw/master/snip/onchat4.png" alt="image" /></p></li>
<li><p>at 人，私聊  <br/>
  <img src="https://github.com/naiteluo/Images/raw/master/snip/onchat5.png" alt="image" /></p></li>
</ul>


<h2>程序说明</h2>

<h3>基本web框架</h3>

<p>OnChat使用Expres框架作为基础搭建。用Express可以很快地搭建出一个包含健壮的路由、模板引擎等的轻量高效服务器，省去大量底层的工作，可以专注于应用的实现。主程序app.js主要添加一下部分以引入我们的聊天模块：</p>

<pre><code>// Init chat room
var chat = Chat(sio.listen(app));
chat.start();
</code></pre>

<p>Socket.IO则是使用到的另一个重要的module。它封装了websocket的一些常用方法，还提供多浏览器支持。我们使用Socket.IO来实现websokcet的通信。聊天室封装成一个名为CR对象，一个CR对象包括一个Room。Room对象中有一个User的列表。每个User对象作为于Room的连接，处理每个Client对服务器的通信。代码在</p>

<pre><code>./chat/index.js
</code></pre>

<p>由于同样使用JavaScript和Socket.IO，前端使用的js代码于后端基本类似。</p>

<pre><code>./public/javascripts/chat.js
</code></pre>

<h3>文件目录</h3>

<pre><code>.
├── Procfile
├── README.md
├── app.js                    # 主程序
├── chat                  # 聊天室模块
│   └── index.js
├── example
│   ├── client.html
│   └── server.js
├── node_modules          # 其他依赖模块
│   ├── express               # web 框架
│   ├── jade
│   └── socket.io         # websocket 框架
├── npm-debug.log
├── package.json          # npm 信息
├── public                    # 公共文件
│   ├── bootstrap
│   ├── images
│   ├── javascripts
│   └── stylesheets
├── routes                    # routes
│   └── index.js
└── views                 # 模板文件
    ├── 404.jade
    ├── index.jade
    └── layout.jade
</code></pre>

<h3>安装使用说明</h3>

<ol>
<li>安装node.js 与 npm</li>
<li><p>下载代码，进入项目根目录，使用npm进行依赖包下载，完成后运行</p>

<pre><code> $ cd ./OnChat
 $ npm install
 $ node app.js
</code></pre></li>
<li><p>访问127.0.0.1:3000（使用chrome 14 + 或 safari 5 + 访问）</p></li>
<li>安装配置有问题的，可以访问在线demo：<a href="http://onchat.herokuapp.com">OnChat on Heroku</a></li>
</ol>


<h2>缺点分析</h2>

<p>一些缺点：</p>

<ul>
<li>Websocket只兼容版本较高的浏览器，当浏览器版本较低时，Socket.IO将转用传统的轮询方式</li>
<li>没有用户注册，用户即时登陆</li>
<li>只支持纯文本聊天</li>
</ul>


<p>计划修改与提高：</p>

<ul>
<li>增加微博绑定认证的注册机制</li>
<li>增加表情</li>
<li>增加画板</li>
</ul>


<h2>总结</h2>

<p>这次项目过程中使用了websocket这个HTML5的新特性，在效率和速度上的优势在聊天室这个对实时性要求不是很苛刻的应用上没有特别地体现，但是有一个很明显的优势体现出来了，就是在代码编写上面变的很简单。用以往轮询的方法实现起来，代码逻辑会比较复杂。而不管是直接用websocket或者是socket.io，应用起来的逻辑都比较简单，一个是on，监听message，另一个是send，发送message。这样我们就可以很容易地讲User封装起来，代码更简洁易懂。另外，websocket还可以扩展出很多应用，例如一些实时交互的游戏，服务器监控等。</p>
 -->
<em>Posted on 02 June 2012.</em>
<hr/>

<h2>
	<a href="/2012-05-28/build-your-blog-with-github-pages-and-jekyll.html">
		Build your blog with github pages and jekyll
	</a>
</h2>
<!-- <p>It is cool to have yout own blog. And it is really cool to have a blog built with github pages. Let learn about it together.</p> <h2>what I refer to</h2> <p>Fisrt i will follow the guide in <a href="http://help.github.com/pages">GitHub Pages help</a>. If you can easily read that guide, i strongly... -->
<!-- <p>It is cool to have yout own blog. And it is really cool to have a blog built with github pages. Let learn about it together.</p>

<h2>what I refer to</h2>

<p>Fisrt i will follow the guide in <a href="http://help.github.com/pages">GitHub Pages help</a>. If you can easily read that guide, i strongly recommend you to read it fisrt. I write this article as a reading note.
Second, you need some basic knowledge about <a href="https://github.com/mojombo/jekyll/wiki/Usage">jekyll</a>.</p>

<h2>What is GitHub Pages</h2>

<p>It is a feature that allow you to publish content to web by pushing them to yout GitHub hosted repositories. Some people use it to make blog and some use Pages to create a project intro website. I am going to use it to make a personal Blog.</p>

<h2>Steps</h2>

<p>To be continued...</p>
 -->
<em>Posted on 28 May 2012.</em>
<hr/>

<h2>
	<a href="/2012-05-27/javascript-the-definitive-guide-introduction-to-javascript.html">
		JavaScript the Definitive Guide Reading Introduction to JavaScript
	</a>
</h2>
<!-- <h2>Chapter 1, Introduction to JavaScript</h2> <blockquote><p>HTML to specify the content of web pages, css to specify the presentation of web pages, and JavaScript to specify the behavior of web pages.</p></blockquote> <p>High-level, dynamic, untyped interpreted(解释). Well-suited to object-oriented and functional programming styles.</p> <p>Minimal built-in API for working with text, arrays, dates,... -->
<!-- <h2>Chapter 1, Introduction to JavaScript</h2>

<blockquote><p>HTML to specify the content of web pages, css to specify the presentation of web pages, and JavaScript to specify the behavior of web pages.</p></blockquote>

<p>High-level, dynamic, untyped interpreted(解释). Well-suited to object-oriented and functional programming styles.</p>

<p>Minimal built-in API for working with text, arrays, dates, and regular expressions but does not include any input or output functionality. I, O are the responsibility of the "host environment", usually web browser.</p>

<h3>1.1 Core JavaScript</h3>

<p>blablabla…</p>

<p>JavaScript is object-oriented, but it is quite different than most. Here show how to create class to represent 2D geometric points.</p>

<pre><code>// Define a construtor function to initialize a new Point object
function Point(x, y) {      // by convention, constructors start with capitals
    this.x = x;             // this keyword is the new object being init
    this.y = y;             
}                           // no return is necessary

// Use a constructor function with the keyword "new" to create instances
var p = new Point(1, 1);

// Define methods for Point objects by assigning them to the prototype
// object associated with constructor function.
Point.prototype.r = function () {
    return Math.sqrt(this.x * this.x + this.y + this.y);
};

// Now instances of Point object inherits the method r()
console.log(p.r());
</code></pre>

<h3>1.2 Client-Side JavaScript</h3>

<p>About web pages:</p>

<ul>
<li>JavaScript in Web Browser</li>
<li>Scripting Documents</li>
<li>Scripting CSS</li>
<li><p>Handling Events</p>

<p>  (addEventListener or attachEvent ? Compatibility with IE?)</p></li>
<li><p>The [JQuery]: <a href="http://www.jquery.com/">http://www.jquery.com/</a> Library</p></li>
</ul>


<p>Focus on web applications:</p>

<ul>
<li>Scripted HTTP</li>
<li>Client-Side Storage</li>
<li>Scripted Media and Graphics</li>
<li>HTML5 APIs, OS typed</li>
</ul>

 -->
<em>Posted on 27 May 2012.</em>
<hr/>

<h2>
	<a href="/2012-05-25/steps-to-make-app-in-node-with-express.html">
		Steps to make app in node with express
	</a>
</h2>
<!-- <h2>Preparation</h2> <p>安装配置好node.js和npm。</p> <h2>Steps</h2> <ol> <li><p>创建App文件夹，进入文件夹</p> <pre><code> mkdir guess cd guess </code></pre></li> <li><p>用npm下载express</p> <pre><code> npm install express </code></pre></li> <li><p>用Express初始化App，可能会警告文件夹非空，选择y继续</p> <pre><code> ./node_module/express/bin/express . </code></pre></li> <li><p>文件目录如下：</p> <pre><code> . ├── app.js # 应用的入口，主文件 ├── node_modules # node 模块 │   └── express ├── package.json # 配置文件 ├── public # 公共文件，静态文件 │   ├── images # 图片... -->
<!-- <h2>Preparation</h2>

<p>安装配置好node.js和npm。</p>

<h2>Steps</h2>

<ol>
<li><p>创建App文件夹，进入文件夹</p>

<pre><code> mkdir guess
 cd guess
</code></pre></li>
<li><p>用npm下载express</p>

<pre><code> npm install express
</code></pre></li>
<li><p>用Express初始化App，可能会警告文件夹非空，选择y继续</p>

<pre><code> ./node_module/express/bin/express .
</code></pre></li>
<li><p>文件目录如下：</p>

<pre><code> .
 ├── app.js                # 应用的入口，主文件
 ├── node_modules      # node 模块
 │   └── express           
 ├── package.json      # 配置文件
 ├── public                # 公共文件，静态文件
 │   ├── images                # 图片
 │   ├── javascripts           # 前端js
 │   └── stylesheets           # 样式表
 ├── routes                # 路由文件
 │   └── index.js
 └── views             # 模版
     ├── index.jade
     └── layout.jade
</code></pre></li>
<li><p>打开package.json文件，这个文件是npm用来获取app的信息和相关依赖module信息的，修改如下：</p>

<pre><code> {
     "name": "guess"
   , "version": "0.0.1"
   , "private": true
   , "dependencies": {
       "express": "2.5.8"
     , "jade": "&gt;= 0.0.1"
     , "socket.io" : "&gt;= 0.0.1"
   }
 }
</code></pre>

<p> 我们添加了socket.io module，保存。再用npm来安装所有依赖的modules。</p>

<pre><code> npm install
</code></pre></li>
<li><p>基本的配置已经完成了，接下来我们编辑./views/index.js</p>

<pre><code> /*
  * GET home page.
  */

 exports.index = function(req, res){
   res.render('index', { title: 'Guess' })
 };
</code></pre>

<p> 将title修改成我们应用的名字：Guess。</p></li>
<li><p>接下来就可以运行程序了</p>

<pre><code> node app.js
 Express server listening on port 3000 in development mode
</code></pre>

<p> 在浏览器中访问：[http://localhost:3000/]: <a href="http://localhost:3000/">http://localhost:3000/</a> ，效果如下:</p>

<blockquote><p><h1>Guess</h1>
<p>Welcome to Guess</p></p></blockquote></li>
</ol>

 -->
<em>Posted on 25 May 2012.</em>
<hr/>

<h2>
	<a href="/2011-12-31/install-nodejs-in-ubuntu.html">
		Ubuntu 11.04 Node.js 配置
	</a>
</h2>
<!-- <p>实在是很折腾，冲着一个好的设计环境换回了windows7，但是感觉做开发的话还是linux下限值会比较小，于是用虚拟机，刚开始装回archlinux，发现vmware下装archlinux又是另外的折腾了，装不好gnome3，不能忍受难看的界面，另外也懒得折腾了，于是改装了ubuntu，10.10不太稳定，选择了10.04 lts。啥都不管了，直奔node的配置，找了篇国外的文章，一边操作一边翻译一下:</p>

<p>由于直奔node而去，之前什么都没有配置过，所以可以直接按照一下来满足node.js的alias：</p>

<pre><code>sudo apt-get install g++ curl libssl-dev apache2-utils
</code></pre>

<p>最简单的方法当然用git下载node的源码啦，先安装git</p>

<pre><code>sudo apt-get install git-core
git clone git://github.com/joyent/node.git
</code></pre>

<p>我这里直接在官网上下载了包：</p>

<pre><code>tar -zxf node-v0.6.5.tar.gz
cd node-v0.6.5
./configure
make
sudo make install
</code></pre>

<p>接下来是npm，One Line Install</p>

<pre><code>curl http://npmjs.org/install.sh | sh
</code></pre>

<p>作者还给喜欢很多行安装方法的人提供了方法，遇到如权限问题等，具体可以到<a href="http://npmjs.org">npm官网</a>上查看</p>

<p>OK啦，又开始nodejs啦</p>
 -->
<!-- <p>实在是很折腾，冲着一个好的设计环境换回了windows7，但是感觉做开发的话还是linux下限值会比较小，于是用虚拟机，刚开始装回archlinux，发现vmware下装archlinux又是另外的折腾了，装不好gnome3，不能忍受难看的界面，另外也懒得折腾了，于是改装了ubuntu，10.10不太稳定，选择了10.04 lts。啥都不管了，直奔node的配置，找了篇国外的文章，一边操作一边翻译一下:</p>

<p>由于直奔node而去，之前什么都没有配置过，所以可以直接按照一下来满足node.js的alias：</p>

<pre><code>sudo apt-get install g++ curl libssl-dev apache2-utils
</code></pre>

<p>最简单的方法当然用git下载node的源码啦，先安装git</p>

<pre><code>sudo apt-get install git-core
git clone git://github.com/joyent/node.git
</code></pre>

<p>我这里直接在官网上下载了包：</p>

<pre><code>tar -zxf node-v0.6.5.tar.gz
cd node-v0.6.5
./configure
make
sudo make install
</code></pre>

<p>接下来是npm，One Line Install</p>

<pre><code>curl http://npmjs.org/install.sh | sh
</code></pre>

<p>作者还给喜欢很多行安装方法的人提供了方法，遇到如权限问题等，具体可以到<a href="http://npmjs.org">npm官网</a>上查看</p>

<p>OK啦，又开始nodejs啦</p>
 -->
<em>Posted on 31 December 2011.</em>
<hr/>

<h2>
	<a href="/2011-11-07/html5-game-notes-matching.html">
		html5游戏笔记 matching game
	</a>
</h2>
<!-- <p>我也不知道这个游戏的中文名叫什么，就是12张扑克，翻开两张如果不是一对就自动翻回来，一对的话就可以取走，最后所有牌都取走了游戏就结束。貌似挺无聊的游戏，不过不得不自愧设计功力之低，树上简单的几个css和几个图片，整个页面就变得很有质感和层次感。游戏主要通过CSS3来实现翻转，用javascript来改变DOM的类和整个游戏的逻辑。我觉得最主要吸收的精华是：用CSS3来实现页面元素的动画（效率是不是比cavans高？ 迟点再验证），用javascript控制逻辑。</p> <h2>CSS3实现元素动画</h2> <p>首先来看看CSS3的新的动画animation相关属性。 一开始还有点模糊，因为英文书上用了tween这个单词，查了一下单词的含义并仔细分析以下代码后，得知这动画的实现是利用transition属性来为transform属性的转化增加补间动画。有点绕，意思就是，本来transform属性的变化的是一个状态，是没有过程的，例如从一个位置translate到另一个位置，从一个角度rotate到另一个角度，一个跳跃式的变化。而transition的作用就是让这一切变得不那么突然，先看看CSS3 transition的W3C的解释</p> <blockquote><p>CSS transition allows property changes in CSS values to occur smoothly over a specified duration.</p></blockquote> <p>transition属性将瞬间的变化减慢，并附加指定的动画，它的用法如下：</p> <pre><code>/* * 值：应用属性名，可设为all， * 设置动画 * 补间时长 * 动画开始的延时 */ transition: property_name duration timing_function delay; /* 为所有变化都附加时长为1s的线性补间动画 */ transition: all 1s linear; /* 为透明化增加0.3s的补间动画，并为背景颜色变化增加0.5s的补间动画 */ transition: opacity 0.3s,... -->
<!-- <p>我也不知道这个游戏的中文名叫什么，就是12张扑克，翻开两张如果不是一对就自动翻回来，一对的话就可以取走，最后所有牌都取走了游戏就结束。貌似挺无聊的游戏，不过不得不自愧设计功力之低，树上简单的几个css和几个图片，整个页面就变得很有质感和层次感。游戏主要通过CSS3来实现翻转，用javascript来改变DOM的类和整个游戏的逻辑。我觉得最主要吸收的精华是：用CSS3来实现页面元素的动画（效率是不是比cavans高？ 迟点再验证），用javascript控制逻辑。</p>

<h2>CSS3实现元素动画</h2>

<p>首先来看看CSS3的新的动画animation相关属性。 一开始还有点模糊，因为英文书上用了tween这个单词，查了一下单词的含义并仔细分析以下代码后，得知这动画的实现是利用transition属性来为transform属性的转化增加补间动画。有点绕，意思就是，本来transform属性的变化的是一个状态，是没有过程的，例如从一个位置translate到另一个位置，从一个角度rotate到另一个角度，一个跳跃式的变化。而transition的作用就是让这一切变得不那么突然，先看看CSS3 transition的W3C的解释</p>

<blockquote><p>CSS transition allows property changes in CSS values to occur smoothly over a specified duration.</p></blockquote>

<p>transition属性将瞬间的变化减慢，并附加指定的动画，它的用法如下：</p>

<pre><code>/*
 * 值：应用属性名，可设为all，
 *     设置动画
 *     补间时长
 *     动画开始的延时
 */
transition: property_name duration timing_function delay;
/* 为所有变化都附加时长为1s的线性补间动画 */
transition: all 1s linear;
/* 为透明化增加0.3s的补间动画，并为背景颜色变化增加0.5s的补间动画 */
transition: opacity 0.3s, background-color o.5s;
</code></pre>

<p>transition属性的介绍大概到这里，附送一些参考链接：</p>

<p>接着看看transform的用法，可能会跟以前接触到的CSS属性比较不一样，它所接受的值是函数：</p>

<pre><code>transform: transform-function1 transform-function2;
/* 移动到(150px,150px)的位置上，并上下翻转180度 */
transform: translate(150px,150px) rotate3d(1,0,0,180deg);
</code></pre>

<p>主要有2D和3D两种函数，3D与2D的基本相似，增加了Z轴。所以这里只简单介绍3D transfroms functions：</p>

<p>旋转函数,其中的[x, y, z]是一个单位向量：</p>

<pre><code>rotate3d(x, y, z, angle)
/* equals to */
rotateX(angle)
rotateY(angle)
rotateZ(angle)
</code></pre>

<p>移动函数，其中(tx, ty, tz)为空间坐标值：</p>

<pre><code>translate3d(tx, ty, tz)
/* equals to */
translateX(tx)
translateY(ty)
translateZ(tz)
</code></pre>

<p>缩放函数：</p>

<pre><code>scale3d(sx, sy, sz)
/* equals to */
scaleX(sx)
scaleY(sy)
scaleZ(sz)
</code></pre>

<p>综上，就可以总结一下大概要设置哪些css类了</p>

<pre><code>.card {
    /* 卡牌的类，设置定位，设置所有动画0.3秒的补间 */
}
.face {
    /* 设置卡牌牌面的需要补间的动哈：透明度，变形，盒阴影，补间0.3秒 */
}
.front {
    /* 牌的正面的背景图，z-index高于.back */
}
.back {
    /* 牌底背景图，未设置background-position，
     * 后面会使用css spirit
     */
}
.card:hover .face, .card-flipped .face {
    /* 设置盒阴影 */
}
.card-flipped .front {
    /* 旋转变换，设置z-index小于.back */
}
.card-flipped .front {
    /* 旋转变换 */
}
.card-removed {
    /* 设置淡去效果，并用于作为删除元素的标记 */
}

/* cards' css sprite */
.cardXX { background-position: xpx ypx ;}
</code></pre>

<p>CSS3实现动画的部分好像讲得太多了，不过那是比较陌生的东西，所以看得比较细置，接下来简单记录以下游戏的逻辑：</p>

<p>洗牌发牌，随机排列预定义的数组，并复制.card元素，通过根据index来作绝对定位，增加css类改变牌底背景坐标，用attr函数给我们自定义的data-pattern属性赋值，用于辨别牌型。最后给每张牌都绑定一个oncli，触发selecCard函数,selectCard先判断现在翻开的牌数：</p>

<pre><code>// flip the card and schedule the checking function
function selectCard() {
    // we do nothing if there are already two card flipped
    if ($(".card-flipped").size() &gt; 1) {
        return;
    }
    $(this).addClass("card-flipped");
    // check the pattern of both flipped card 0.7s later
    if ($(".card-flipped").size() == 2) {
        setTimeout(checkPattern, 300);
    }
}
</code></pre>

<p>对牌进行匹配判断，获取已翻开牌的data-pattern属性值来比较，同样的牌则对牌增加.card-removed作为标记，并在变换的补间动画后删除这两个标置了的牌；不匹配的话就将.card-filpped去掉.</p>

<p>逻辑比较简单，不详细说了。</p>
 -->
<em>Posted on 07 November 2011.</em>
<hr/>

<h2>
	<a href="/2011-11-03/html5-game-notes-pingpong.html">
		html5游戏笔记 pingpong ball
	</a>
</h2>
<!-- <p>下载了本《html5 Game Development by Example》的书，看着很有趣，一些游戏的实例，用来熟悉html5/css3配合javascript的新特性。记录一下写一下blog增加记忆。</p> <p><a href="http://mmnn-wordpress.stor.sinaapp.com/uploads/2011/11/1.png"><img class="size-medium wp-image-51" title="pingpong" src="http://mmnn-wordpress.stor.sinaapp.com/uploads/2011/11/1-284x300.png" alt="pingpong" width="284" height="300" /></a></p> <p>书的第一章简单地介绍了html5和css3的一些新特性；第二章的example是一个pingpong的游戏，就是左右各一块板，中间一个小球弹来弹去的游戏。这本书已经完全不考虑html之前的版本了，所以还会介绍html的一些新标签；基本不涉及到css3的内容；使用jquery做游戏开发的基本方法。游戏链接：<a title="Pingpong" href="http://mmnn.sinaapp.com/demos/pingpong/">Pingpong game demo</a></p> <p>html5使用了跟简单的文件声明,取代了原来那一串重来都只是被copy的复杂文件声明，html标签也只需加入一个lang的语言属性即可，制定字符集的meta也得到简化:这次使用了header和footer标签，以前用得很多的这两个id名终于修成正果升级成了正式的标签，加入这种标签提高了html的语义。</p> <p>这里还说到一个js代码插入的位置，以前一般习惯会在head标签内插入script，而建议的将code放到页面的靠后，也就是body的结束标签之前。因为浏览器解析html代码是从上到下的，如果把js代码放到前面，延缓了内容的加载。</p> <p>主要只有三个对象，两挡板和球，对其使用</p> <pre><code>position:absolute; </code></pre> <p>布局，再通过</p> <pre><code>$("#xxx").css({"top": xx, "left": yy}); </code></pre> <p>来改变球的位置,基本上就是用元素的top和left这两个css属性来作为x,y坐标，对三个对象进行操作。基本操作的方法就是这样，接下来要让东西动起来了。</p> <p>动起来就是让他们重复第进行位置改变，对于两挡板来说，位置的改变还需要按键的触发。设置一个interval，间隔为30ms，执行gameloop函数：</p> <pre><code>$(function(){ // set interval to call gameloop every 20 milliseconds pingpong.timer = setInterval(gameloop, 30); // mark down... -->
<!-- <p>下载了本《html5 Game Development by Example》的书，看着很有趣，一些游戏的实例，用来熟悉html5/css3配合javascript的新特性。记录一下写一下blog增加记忆。</p>

<p><a href="http://mmnn-wordpress.stor.sinaapp.com/uploads/2011/11/1.png"><img class="size-medium wp-image-51" title="pingpong" src="http://mmnn-wordpress.stor.sinaapp.com/uploads/2011/11/1-284x300.png" alt="pingpong" width="284" height="300" /></a></p>

<p>书的第一章简单地介绍了html5和css3的一些新特性；第二章的example是一个pingpong的游戏，就是左右各一块板，中间一个小球弹来弹去的游戏。这本书已经完全不考虑html之前的版本了，所以还会介绍html的一些新标签；基本不涉及到css3的内容；使用jquery做游戏开发的基本方法。游戏链接：<a title="Pingpong" href="http://mmnn.sinaapp.com/demos/pingpong/">Pingpong game demo</a></p>

<p>html5使用了跟简单的文件声明,取代了原来那一串重来都只是被copy的复杂文件声明，html标签也只需加入一个lang的语言属性即可，制定字符集的meta也得到简化:这次使用了header和footer标签，以前用得很多的这两个id名终于修成正果升级成了正式的标签，加入这种标签提高了html的语义。</p>

<p>这里还说到一个js代码插入的位置，以前一般习惯会在head标签内插入script，而建议的将code放到页面的靠后，也就是body的结束标签之前。因为浏览器解析html代码是从上到下的，如果把js代码放到前面，延缓了内容的加载。</p>

<p>主要只有三个对象，两挡板和球，对其使用</p>

<pre><code>position:absolute;
</code></pre>

<p>布局，再通过</p>

<pre><code>$("#xxx").css({"top": xx, "left": yy});
</code></pre>

<p>来改变球的位置,基本上就是用元素的top和left这两个css属性来作为x,y坐标，对三个对象进行操作。基本操作的方法就是这样，接下来要让东西动起来了。</p>

<p>动起来就是让他们重复第进行位置改变，对于两挡板来说，位置的改变还需要按键的触发。设置一个interval，间隔为30ms，执行gameloop函数：</p>

<pre><code>$(function(){ // set interval to call gameloop every 20 milliseconds        pingpong.timer = setInterval(gameloop, 30); // mark down what key is down and up into an array called "pressedKeys" 
    $(document).keydown(function (e) { 
        pingpong.pressedKeys[e.which] = true; 
    }); 
    $(document).keyup(function (e) { 
        pingpong.pressedKeys[e.which] = false; 
    }); 
}); 
function gameloop() { 
    moveBall(); 
    movePaddles(); 
}
</code></pre>

<p>其中，movePaddles()通过上面的keyup()获取键值，触发paddle的移动，最后只需要加上球的位置判断函数，根据位置来改变运动方向了。实例中没有考虑板的两端和背部对球的反弹，这里一并用一个inFiled()函数判断球的位置再根据板来判定反弹方向，</p>

<pre><code>function inField(p) { 
    var pXL = parseInt(p.css("left")); 
    var pXR = pXL + parseInt(p.css("width")); 
    var pYT = parseInt(p.css("top")); 
    var pYB = pYT + parseInt(p.css("height")); 
    var bX = pingpong.ball.x; 
    var bY = pingpong.ball.y; 
    var bD = pingpong.ball.d; 
    var fX = pingpong.ball.speed * pingpong.ball.directionX; 
    var fY = pingpong.ball.speed * pingpong.ball.directionY; 
        // right field, return 1
    if (bX &gt;= pXR &amp;&amp; bY + bD &gt;= pYT &amp;&amp; bY &lt;= pYB) {
        if (bX + fX &lt;= pXR) {
            if (bY + bD + fY &gt;= pYT &amp;&amp; bY + fY &lt;= pYB) {
                return 1;
            }
        }
    }
    // left field, return 2
    if (bX + bD &lt;= pXL &amp;&amp; bY + bD &gt;= pYT &amp;&amp; bY &lt;= pYB) {
        if (bX + bD + fX &gt;= pXL) {
            if (bY + bD + fY &gt;= pYT &amp;&amp; bY + fY &lt;= pYB) {
                return 2;
            }
        }
    }
    // top field, return 3
    if (bX + bD &gt;= pXL &amp;&amp; bX &lt;= pXR &amp;&amp; bY + bD &lt;= pYT) {
        if (bY + bD + fY &gt;= pYT) {
            if (bX + bD + fX &gt;= pXL &amp;&amp; bX + fX &lt;= pXR) {
                return 3;
            }
        }
    }
    // bottom field, return 4
    if (bX + bD &gt;= pXL &amp;&amp; bX &lt;= pXR &amp;&amp; bY &gt;= pYB) {
        if (bY + fY &gt;= pYT) {
            if (bX + bD + fX &gt;= pXL &amp;&amp; bX + fX &lt;= pXR) {
                return 4;
            }
        }
    }
}
</code></pre>

<p>另外，有个作者介绍的小技巧，就是在调试程序的时候可以用如下的Grid图来作为背景，方便坐标的测定和调整：</p>

<p><a href="http://mmnn-wordpress.stor.sinaapp.com/uploads/2011/11/pixel_grid.jpg"><img class="size-medium wp-image-55" title="pixel_grid" src="http://mmnn-wordpress.stor.sinaapp.com/uploads/2011/11/pixel_grid-300x300.jpg" alt="pixel_grid" width="300" height="300" /></a></p>

<p>还可以利用chrome的developer工具中的js console对js进行调试.</p>
 -->
<em>Posted on 03 November 2011.</em>
<hr/>

<h2>
	<a href="/2011-10-19/network-config-in-archlinux.html">
		archlinux简单网络配置与命令
	</a>
</h2>
<!-- <p>这里只是给出简单的网络配置和常用命令，备忘。详细的可查阅官方wiki上的： Configuring Network</p> <p>首先是/etc/rc.conf的配置，动态获取ip的只需要选择一个接口：</p> <pre><code>interface="eth0" address= netmask= gateway= </code></pre> <p>想要自定义dns，在/etc/dhcpcd.conf</p> <pre><code>nohook resolv.conf </code></pre> <p>并将自己的dns服务器加入/etc/resolv.conf中。</p> <pre><code>/* * 静态ip的还不太了解， * 挖个坑以后再填。 */ </code></pre> <p>重启nerwork daemon，启用配置:</p> <pre><code># /etc/rc.d/network restart </code></pre> <p>通过ping看是否已成功连接</p> <pre><code>$ ping -c 3 www.google.com </code></pre> <p>手动连接或断开网络接口：</p> <pre><code># ip link set up/down </code></pre> <p>接下来是无线网络设置与连接，需要先安装wireless_tools和取得哦给相关软件包madwifi:</p> <pre><code># pacman -S wireless_tools # pacman -S madwifi... -->
<!-- <p>这里只是给出简单的网络配置和常用命令，备忘。详细的可查阅官方wiki上的：
Configuring Network</p>

<p>首先是/etc/rc.conf的配置，动态获取ip的只需要选择一个接口：</p>

<pre><code>interface="eth0"
address=
netmask=
gateway=
</code></pre>

<p>想要自定义dns，在/etc/dhcpcd.conf</p>

<pre><code>nohook resolv.conf
</code></pre>

<p>并将自己的dns服务器加入/etc/resolv.conf中。</p>

<pre><code>/*
 * 静态ip的还不太了解，
 * 挖个坑以后再填。
 */
</code></pre>

<p>重启nerwork daemon，启用配置:</p>

<pre><code># /etc/rc.d/network restart
</code></pre>

<p>通过ping看是否已成功连接</p>

<pre><code>$ ping -c 3 www.google.com
</code></pre>

<p>手动连接或断开网络接口：</p>

<pre><code># ip link set  up/down
</code></pre>

<p>接下来是无线网络设置与连接，需要先安装wireless_tools和取得哦给相关软件包madwifi:</p>

<pre><code># pacman -S wireless_tools
# pacman -S madwifi
</code></pre>

<p>确定接口和相应模块</p>

<pre><code># lspci | grep -i net
</code></pre>

<p>确定此模块已经被载入。使用命令</p>

<pre><code># lsmod | grep 
</code></pre>

<p>接下来可以开始连接了，确定驱动已经创建了可用的接口(wlanX, ethX, athX):</p>

<pre><code># iwconfig
</code></pre>

<p>启用无线接口:</p>

<pre><code># ip link set wlan0 up
</code></pre>

<p>搜索可用的接入点</p>

<pre><code># iwlist wlan0 scan
</code></pre>

<p>以下是几种不同的wifi的接入：</p>

<p>No encryption 无加密的</p>

<pre><code># iwconfig wlan0 essid "MyEssid"
</code></pre>

<p>WEP</p>

<pre><code># #hecadecimal key
# iwconfig wlan0 essid "MyEssid" key 1234567890
# #ASCII key
# iwconfig wlan0 essid "MyEssid" key s:asciikey
</code></pre>

<p>确定是否连接到接入点：</p>

<pre><code># iwconfig wlan0
</code></pre>

<p>动态分配IP</p>

<pre><code># dhcpcd wlan0
</code></pre>

<p>当然，最简单的还是用网络管理器如：Wicd,NetworkManager.不过我在连接校园网的wifi时用networkmanager未果，故推荐wicd。</p>
 -->
<em>Posted on 19 October 2011.</em>
<hr/>

<h2>
	<a href="/2011-10-16/problems-installing-archlinux.html">
		Archlinux 安装配置问题
	</a>
</h2>
<!-- <p>已经重装了6、7 archlinux了，每次都因为一些琐碎的问题无法解决而选择重装，这次静下心来读wiki，看帖子，总算把之前积累的问题大概都解决了。</p> <p>用的默认的network进行网络管理，开机启动特别慢，而且gnome启动后的networkmanager因为冲突而disabled。networkmanager是一个DAEMON,可以手动用/etc/rc.d/networkmanager start来启动它，更好地是将其加入/etc/rc.conf的DAEMON列表中，并将原来的network用’!'感叹号取消掉，即可。安装network-manager-applet后就能在gnome里显示图标方便使用。</p> <p>此后发现了一个很严重的问题，nerworkmanager连不上校园网，网上也很多说wifi无法连接的文章，与其自己修改到崩溃，不如早点换一个，就试用了wicd，目前尚且完美。安装：</p> <pre><code># pacman -S wicd # pacman -S wicd-gtk </code></pre> <p>开启前必须关闭所有网络的daemons,</p> <pre><code># rc.d stop network # rc.d stop dhcpcd # rc.d stop networkmanager </code></pre> <p>设置DAEMONS，依赖dbus，前面禁用其他网络管理软件：</p> <pre><code># vim /etc/rc.conf DAEMONS=(syslog-ng dbus !network !dhcdbd !networkmanager wicd ...) ~ ~ </code></pre> <p>后续工作咯</p> <p>ibus1.4安装完后无法显示输入法，google之网友们说是一个bug，修复方法如下：</p> <pre><code>sudo pacman -S abs sudo abs... -->
<!-- <p>已经重装了6、7 archlinux了，每次都因为一些琐碎的问题无法解决而选择重装，这次静下心来读wiki，看帖子，总算把之前积累的问题大概都解决了。</p>

<p>用的默认的network进行网络管理，开机启动特别慢，而且gnome启动后的networkmanager因为冲突而disabled。networkmanager是一个DAEMON,可以手动用/etc/rc.d/networkmanager start来启动它，更好地是将其加入/etc/rc.conf的DAEMON列表中，并将原来的network用’!'感叹号取消掉，即可。安装network-manager-applet后就能在gnome里显示图标方便使用。</p>

<p>此后发现了一个很严重的问题，nerworkmanager连不上校园网，网上也很多说wifi无法连接的文章，与其自己修改到崩溃，不如早点换一个，就试用了wicd，目前尚且完美。安装：</p>

<pre><code># pacman -S wicd
# pacman -S wicd-gtk
</code></pre>

<p>开启前必须关闭所有网络的daemons,</p>

<pre><code># rc.d stop network
# rc.d stop dhcpcd
# rc.d stop networkmanager
</code></pre>

<p>设置DAEMONS，依赖dbus，前面禁用其他网络管理软件：</p>

<pre><code># vim /etc/rc.conf
DAEMONS=(syslog-ng dbus !network !dhcdbd !networkmanager wicd ...)
~
~
</code></pre>

<p>后续工作咯</p>

<p>ibus1.4安装完后无法显示输入法，google之网友们说是一个bug，修复方法如下：</p>

<pre><code>sudo pacman -S abs
sudo abs community/ibus-sunpinyin
mkdir ~/abs
cp -r /var/abs/community/ibus-sunpinyin ~/abs
cd ~/abs/ibus-sunpinyin
makepkg -s
sudo pacman -U ibus-sunpinyin-2.0.3-1-*.pkg.tar.xz
</code></pre>

<p>并在~/.profile文件中加入以下代码让其自启动：</p>

<pre><code>export GTK_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=ibus
ibus-daemon -d -x
</code></pre>
 -->
<em>Posted on 16 October 2011.</em>
<hr/>

<h2>
	<a href="/2011-10-01/install-LAMP-environment-in-ubuntu-1104.html">
		Ubuntu 11.04 LAMP安装配置
	</a>
</h2>
<!-- <p>11.04是lts的版本，以后用ubuntu的话可以作为首选，这里纪录一下LAMP的配置方法。</p>

<p>1.首先是安装LAMP，一个命令：</p>

<pre><code>sudo apt-get install apache2 php5 libapache2-mod-php5 mysql-server libapache2-mod-auth-mysql php5-mysql phpmyadmin 
</code></pre>

<p>  期间会要求你输入mysql数据库的root用户密码，选择服务器类型［apache］，phpMyAdmin的密码等。</p>

<p>2.装完之后重启一下apache，命令：</p>

<pre><code>sudo /etc/init.d/apache2 restart
</code></pre>

<p>3.把安装的phpmyadmin 链接过来，在/var/www/下用命令：</p>

<pre><code>ln -s /usr/share/phpmyadmin phpmyadmin
</code></pre>
 -->
<!-- <p>11.04是lts的版本，以后用ubuntu的话可以作为首选，这里纪录一下LAMP的配置方法。</p>

<p>1.首先是安装LAMP，一个命令：</p>

<pre><code>sudo apt-get install apache2 php5 libapache2-mod-php5 mysql-server libapache2-mod-auth-mysql php5-mysql phpmyadmin 
</code></pre>

<p>  期间会要求你输入mysql数据库的root用户密码，选择服务器类型［apache］，phpMyAdmin的密码等。</p>

<p>2.装完之后重启一下apache，命令：</p>

<pre><code>sudo /etc/init.d/apache2 restart
</code></pre>

<p>3.把安装的phpmyadmin 链接过来，在/var/www/下用命令：</p>

<pre><code>ln -s /usr/share/phpmyadmin phpmyadmin
</code></pre>
 -->
<em>Posted on 01 October 2011.</em>
<hr/>



		</section>
		<footer>
			<p>This project is maintained by <a href="https://github.com/naiteluo">naiteluo</a></p>
			<p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
		</footer>
	</div>
	<script src="/javascripts/scale.fix.js"></script>
</body>
</html>