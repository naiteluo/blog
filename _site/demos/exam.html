<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>
    	
	    	BaoBao Duai's EXAM
	    
    </title>
    <!-- put *.less file before less.*.js -->
    <link rel="stylesheet" type="text/less" href="/stylesheets/style.less">
    <script src="/javascripts/less-1.3.0.min.js"></script>
    <!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="/stylesheets/ie.fix.css">
    <script type="text/javascript" src="/javascripts/ie.fix.js"></script>
    <![endif]-->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-35934371-1']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</head>
<body>
    <div id="wrapper">
        <header>
            <div class="inner">
                <ul class="nav">
                    <li><a href="/">MMNN</a></li>
                    <li>
                        <a href="/demos/exam.html">EXAM</a>
                        <span class="tip">
                            new!!
                        </span>
                    </li>
                    <li><a href="/demos">DEMOS</a></li>
                    <li><a href="/resume">ABOUT ME</a></li>
                </ul>
                <div class="view">
                    <a href="https://github.com/naiteluo">
                        <small>NAITELUO</small>
                        In Github.
                    </a>
                </div>
            </div> 
        </header>
        <section class="container">
        	<div class="col-center">
    <div class="post box">
        <div class="box-header">
            <h2>
                BaoBao Duai's EXAM
            </h2>
        </div>
        <div class="box-body">
            <p><a href="/">返回首页</a> ｜｜
<a href="#exam1">第一题</a> ｜
<a href="#exam2">第二题</a> ｜
<a href="#exam3">第三题</a> ｜
<a href="#exam4">第四题</a> ｜
<a href="#exam5">第五题</a> ｜
<a href="#exam6">第六题</a> ｜
<a href="#exam7">第七题</a> ｜
<a href="#exam8">第八题</a> ｜
<a href="#exam9">第九题</a> ｜
<a href="#exam10">第十题</a>｜
<a href="#exam11">第十一题</a>｜
<a href="#exam12">第十二题</a>｜
<a href="#exam13">第十三题</a>｜
<a href="#exam14">第十四题</a>｜｜新增：
<a href="#exam15">第十五题</a></p>

<hr />

<ol>
<li><p><span id="exam1"></span>实现<code>walkTheDom</code>函数，接受两个参数，一个是根节点，另一个是回调函数。结构如下：</p>

<pre><code>function walkTheDom(root, callback) {
    // todo
};
</code></pre>

<p>callback接受一个参数，就是当前遍历到的节点。walkTheDom的功能是，遍历所给根结点及其所有子树节点，对每个遍历到的节点都执行callback回调函数。使用示例：</p>

<pre><code>walkTheDom(document.getElementById('wrapper'), function (element) {
    element.style.backgroundColor = 'green';
});
</code></pre>

<p>该示例使用walkTheDom方法遍历id为wrapper的节点和它的所有子节点，将所有节点的背景色变成绿色。</p>

<p>知识点总结：</p>

<ul>
<li>children v.s. childNodes</li>
<li>firstChild, nextSibling, previousSibling</li>
<li>函数作为参数</li>
<li>怎么判断</li>
</ul>


<p>答案：</p>

<pre><code>function walkTheDom(root, callback) {
    var children = root.children;
    var length = children.length;

    callback(root);

    if (length === 0) {
        return;
    } else {
        for (var i = 0; i &lt; length; i++) {
            walkTheDom(children[i], callback);
        }
    }
}
</code></pre></li>
<li><p><span id="exam2"></span>解密：</p>

<p><code>var code = "l,m,t,h,.,f,d,s,a,j,k,l,f,d,a,8,9,3,2,1,l,k,k,j,s,a,/,t,e,n,.,o,u,l,e,t,i,a,n,/,/,:,p,t,t,h"</code></p>

<p>code是一个经过加密的秘密网址，用JavaScript进行解密吧！</p>

<p>提示：用到String和Array的操作</p>

<p>答案：</p>

<pre><code>code.split(',').reverse().join('');
</code></pre></li>
<li><p><span id="exam3"></span>实现<code>getSecondToZero</code>函数，返回距离当天凌晨的毫秒数：</p>

<pre><code>function getSecondToZero() {
    // todo
}
</code></pre>

<p>提示: <code>+new Date</code>可以很简单地获取到此刻的毫秒数。</p></li>
<li><p><span id="exam4"></span>以下是对Element对象的扩展，理解代码并在问号处添加注释：</p>

<pre><code>/**
 *  淡出淡入
 */

(function (d) {

    // ?? 
    if (d.hide || d.show) {
        throw new Error('methods already exist');
    }

    Element.prototype.hide = function (time) {
        var element = this,
            speed = (time) ? ((time &lt; 100) ? 5 : (time / 100)) : 5,
            // ??
            opacity = (+element.style.opacity) || 1;

        // ??
        if (element.animateTimer) {
            clearTimeout(element.animateTimer);
        }

        // 递归函数
        function step() {
            if (opacity &lt;= 0) {
                opacity = 0;
                element.style.opacity = opacity;
                element.style.display = 'none';
                return;
            } else {
                opacity = opacity - 0.01;
                element.style.opacity = opacity;
                element.animateTimer = setTimeout(step, speed);
            }   
        }

        // 开始执行
        step();

        // 链式调用
        return this;
    };

    Element.prototype.show = function (time) {
        var element = this,
            speed = (time) ? ((time &lt; 100) ? 5 : (time / 100)) : 5,
            opacity = (+element.style.opacity) || 0;

        element.style.display = 'block';

        // 清除正在进行的动画
        if (element.animateTimer) {
            clearTimeout(element.animateTimer);
        }

        function step() {
            if (opacity &gt;= 1) {
                opacity = 1;
                element.style.opacity = opacity;
                return;
            } else {
                opacity = opacity + 0.01;
                element.style.opacity = opacity;
                element.animateTimer = setTimeout(step, speed);
            }       
        }

        step();

        return this;
    };

}(document));
</code></pre>

<p>注释版：</p>

<pre><code>/**
 *  淡出淡入
 *  使用方法：
 *  document.getElementsByTagName(body)[0].hide(200);
 *  document.getElementsByTagName(body)[0].show(500);
 */

(function (d) {

    // 避免命名冲突
    if (d.hide || d.show || d.stop) {
        throw new Error('methods already exist');
    }

    // 添加方法到Element的原型
    Element.prototype.hide = function (time) {
        // 初始化
        var element = this,
            // 控制淡入淡出速度
            speed = (time) ? ((time &lt; 100) ? 5 : (time / 100)) : 5,
            // style的成员默认类型为String
            opacity = (+element.style.opacity) || 1;

        // 清除正在进行的动画
        element.stop();

        // 递归函数
        function step() {
            if (opacity &lt;= 0) {
                opacity = 0;
                element.style.opacity = opacity;
                element.style.display = 'none';
                console.log('Fade out finished!');
                return;
            } else {
                opacity = opacity - 0.01;
                element.style.opacity = opacity;
                element.animateTimer = setTimeout(step, speed);
            }   
        }

        // 开始执行
        step();

        // 允许链式调用
        return this;
    };

    Element.prototype.show = function (time) {
        var element = this,
            speed = (time) ? ((time &lt; 100) ? 5 : (time / 100)) : 5,
            opacity = (+element.style.opacity) || 0;

        element.style.display = 'block';

        // 清除正在进行的动画
        element.stop();

        function step() {
            if (opacity &gt;= 1) {
                opacity = 1;
                element.style.opacity = opacity;
                console.log('Fade in finished!');
                return;
            } else {
                opacity = opacity + 0.01;
                element.style.opacity = opacity;
                element.animateTimer = setTimeout(step, speed);
            }       
        }

        step();

        return this;
    };

    // 中止淡入淡出
    Element.prototype.stop = function () {
        var element = this;
        if (element.animateTimer) {
            clearTimeout(element.animateTimer);
            console.log('Fade in or out terminated!');
        }
        return this;
    }

}(document));
</code></pre></li>
<li><p><span id="exam5"></span>参照题目4中的<code>hide</code>和<code>show</code>，在上面的必包函数中新增一个<code>animate</code>方法，对调用对象进行变形。</p>

<pre><code>Element.prototype.animate = function (width, height, time) {
    // todo: blablabla

    return this;
}
</code></pre></li>
<li><p><span id="exam6"></span>JavaScript中将对象值赋给一个变量并不会复制这个对象，而是让变量指向同一个对象。写一个<code>copy</code>方法，完成对象的拷贝：</p>

<pre><code>function copy(obj) {
    // todo
    return newObj;
}

// 使用方法：
var a = {name: 'aaa', age: 13};
var b = copy(a);
</code></pre></li>
<li><p><span id="exam7"></span>列出所有假值。</p></li>
<li><span id="exam8"></span>简述<code>null</code>与<code>undefined</code>的区别。</li>
<li><p><span id="exam9"></span>部分浏览器是不支持<code>getElementsByClassName</code>方法的，扩展Element，新增一个<code>myGetElementsByClassName</code>方法，以供跨浏览器使用</p>

<pre><code>Element.prototype.myGetElementsByClassName = function (className) {
    var result = [];
    // todo
    return result;
}
</code></pre>

<p>方法的使用方法和原生方法一样，如<code>document.getElementById('wrapper').myGetElementsByClassName('box');</code>将返回wrapper元素内的所有类名为box的节点。</p></li>
<li><p><span id="exam10"></span>实现<code>getRandomBetween</code>方法，方法有三个参数，返回大小在参数1，参数2之间的随机数，第三个参数为可选波尔值参数，当为true的时候，返回值不需要取整，当没有该参数或赋值false时，返回值要取整。</p>

<pre><code>function getRandomBetween(from, to, flag) {
    // todo
    return num;
}
</code></pre></li>
<li><p><span id="exam11"></span>下载附件中的.html文件，按要求完成页面功能。 <a href="/demos/attachment/ex11.html">右键另存为</a></p></li>
<li><span id="exam12"></span>使用jQuery实现上题。</li>
<li><span id="exam13"></span>下载附件中的.html文件和图片，完成脚本，使得页面中的小猫可以被拖拽移动。ex13.html:<a href="/demos/attachment/ex13.html">右键另存为</a>,oct.png<a href="/demos/attachment/oct.png">右键另存为</a>。</li>
<li><p><span id="exam14"></span>在上题中我们实现了一个可拖拽的小猫，现在尝试将之前的代码重构一下，写成一个Element的扩展<code>drag</code>，当给drag传入true时，元素则可拖拽，传入false则取消可拖拽状态</p>

<pre><code>document.getElementById('something').drag(true);
</code></pre>

<p>参考之前使用过的扩展的写法。</p></li>
<li><p><span id="exam15"></span>用原生代码发送一个Ajax请求获取数据。</p>

<p>完成ajax.js文件中的todo，实现一个get方法：</p>

<pre><code>ajax.get(url, function (data) {
    // 回调函数，data为请求返回的内容
});
</code></pre>

第二个参数为可选的params对象：

<pre><code>ajax.get(url, {page: 1}, function (data) {
    // 回调函数，data为请求返回的内容
});
</code></pre>

<p>相当于发出一个url + '?page=1'这样的get请求。</p>

<p>点击页面中的START按钮，即发出Ajax请求，请求一个以json保存的用户列表，将请求获取的用户列表信息插入到页面中。</p>

<p>注意事项：</p>

<ol>
<li>由于要使用AJAX，所以将下载的代码解压缩到服务器目录中，用http://localhost/你的路径/ajax来访问目标页面。</li>
<li>用JSON.parse(str)方法处理获取到的json文本。</li>
<li>页面中的其他代码已经完成，阅读代码了解功能后，实现ajax.js中的todo部分。</li>
</ol>


<p>文件包：<a href="/demos/ex/ajax.zip">ajax.zip</a></p>

<p>参考答案：<a href="/demos/ex/ajax/index.html">ajax demo</a></p></li>
</ol>


<h2>16. <span id="exam16"></span></h2>

<blockquote><p><strong> 加油！加油！！加油！！！ </strong>    <a href="#">返回顶部</a></p></blockquote>

        </div>
        <div class="box-footer">
            stay hungry stay fool
        </div>
    </div>
</div>
        </section>
        <footer>
            <p>
                <small>
                    Hosted on GitHub Pages &mdash;
                    Theme by 
                    <a href="https://github.com/naiteluo">naiteluo</a> 
                </small>
            </p>
        </footer>
    </div>
    <!-- baidu tongji -->
    <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F8ea0975679121e289f7ea751023fb0c4' type='text/javascript'%3E%3C/script%3E"));
</script>

</body>
</html>