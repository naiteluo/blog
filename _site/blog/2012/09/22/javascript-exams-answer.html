<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>
    	
	    	一些觉得比较有用的JavaScript题目[解答]
	    
    </title>
    <!-- put *.less file before less.*.js -->
    <link rel="stylesheet" type="text/less" href="/stylesheets/style.less">
    <script src="/javascripts/less-1.3.0.min.js"></script>
    <!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="/stylesheets/ie.fix.css">
    <script type="text/javascript" src="/javascripts/ie.fix.js"></script>
    <![endif]-->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-35934371-1']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</head>
<body>
    <div id="wrapper">
        <header>
            <div class="inner">
                <ul class="nav">
                    <li><a href="/">MMNN</a></li>
                    <li>
                        <a href="/demos/exam.html">EXAM</a>
                        <span class="tip">
                            new!!
                        </span>
                    </li>
                    <li><a href="/demos">DEMOS</a></li>
                    <li><a href="/resume">ABOUT ME</a></li>
                </ul>
                <div class="view">
                    <a href="https://github.com/naiteluo">
                        <small>NAITELUO</small>
                        In Github.
                    </a>
                </div>
            </div> 
        </header>
        <section class="container">
        	<div class="post-wrapper">
    <div class="post box">
        <div class="box-header">
            <h1>一些觉得比较有用的JavaScript题目[解答]</h1>
        </div>
        <div class="box-body">
            <h2>关于全局变量局部变量的四道小题目</h2>

<p>写出以下各段代码的运行结果。</p>

<ul>
<li><p>第一题：</p>

<pre><code>var a = 10;
sayHi();
function sayHi() {
    var a = 20;
    alert(a);
}
alert(a);
</code></pre>

<p>运行结果： 20 10</p></li>
<li><p>第二题：</p>

<pre><code>var a = 10;
sayHi();
function sayHi() {
    a = 20;
    alert(a);
}
alert(a);
</code></pre>

<p>运行结果： 20 20</p></li>
<li><p>第三题：</p>

<pre><code>var a = 10;
sayHi();
function sayHi() {
    a = a + 10;
    alert(a);
    return a;
}
alert(a);
alert(sayHi() + 10);
</code></pre>

<p>运行结果： 20 20 30 40</p></li>
<li><p>第四题：</p>

<pre><code>var a = 10;
sayHi();
function sayHi() {
    var a = a + 10;
    alert(a);
    return a;
}
alert(a);
alert(sayHi() + 10);
</code></pre>

<p>运行结果： NAN 10 NAN NAN</p></li>
</ul>


<p>总结：这几道题其实挺简单的，只要区分好全局变量和局部变量就OK，最后一题里面在sayHi里面的a使局部变量，但是在 <code>a + 10</code> 前a只声明未赋值，所以是<code>undefined</code>， <code>undefined</code>加上一个Number，则得到NAN。</p>

<blockquote><p>摘自<a href="http://www.nowamagic.net/librarys/veda/detail/225">四道JavaScript面试题检测你的js基本功</a></p></blockquote>

<h2>三道搜狐的面试题</h2>

<ul>
<li><p>题目一，实现一个遍历数组或对象里所有成员的迭代器</p>

<p>此外，可以通过回调函数的返回值，来终止迭代。</p>

<p>这道题比较有用的知识点是判断数组和对象，<code>arr instanceof Array</code>在一般情况下还是管用的，但是如果涉及到不同的JavaScript环境，不同的框架，则不完全可靠。以下是兼容的解决方法</p>

<pre><code>var isArray = Array.isArray || function (o) {
    return typeof o === 'string' &amp;&amp;
        Object.prototype.toString.call(o) === '[object Array]';
}
</code></pre>

<p>还使用到<code>Function.call</code>或者<code>Function.apply</code>。call指定函数的this和参数并调用。这两个的区别在于参数的传入方式，如下：</p>

<pre><code>func.call(thisObj, arg0, arg1, arg2);
func.apply(this.Obj, [arg0, arg1, arg2]);
</code></pre>

<p>答案代码：<a href="/demos/ex/sohu/ex1.html">soho/ex1.html</a></p></li>
<li><p>题目二，实现一个叫Man的类，包含attr, words, say三个方法</p>

<p>比较难的有三个地方。</p>

<p>首先，要让Man支持两种调用方式，一种是java式的<code>var me = Man(options);</code>，另一种是使用<code>new</code>操作符的<code>var me = new Man(options);</code>。第一种方法的<code>this</code>指向的是当前执行环境，而第二种的话，会新建一个空对象，<code>this</code>指向这个对象本身，返回给变量<code>me</code>。要想使用prototype来添加方法的话，使用第二种会比较好。基本是按照第二种来写构造函数，对第一种作特殊处理。</p>

<pre><code>if (this.constructor !== Man) {
    return new Man(options);
}
</code></pre>

<p>如果this的构造器不是Man的话，则使用第二种方式创建实例。但是我发现这里面有个比较大的bug，就是当在Man的实例方法里面用this的构造器是Man，这样的话这个判断就无效了。使用另外一种方法可以解决这个问题：</p>

<pre><code>Man ＝ function (options) {
    return new Man.prototype.init(options);
}

// 真正的构造器
Man.prototype.init = function (options) {

}

Man.prototype.init.prototype {
    attr: function () {},
    words: function (str) {},
    say: function () {}
}
</code></pre>

<p>上面的写法实际上构造器是<code>Man.prototype.init</code>，所以<code>me instanceof Man</code>返回的是<code>false</code>，所以我觉得这种写法不如上面，而且还比较难理解。</p>

<p>第二就是在测试代码里面要求不能直接直接通过用对象的属性来写<code>fullname</code>和<code>gender</code>：</p>

<pre><code>me.fullname = "废柴";
me.gender = "人妖";
</code></pre>

<p>不可以这样去改变实例的这两个属性，也就是相当于让这两个属性变得私有。实现的方法是，在构造器内用<code>var</code>定义这两个变量，然后创建特权函数getter setter来操作这这两个属性，如下：</p>

<pre><code>Man = function (options) {

    // 两种调用方式 var p = Man(options); or var p = new Man(options);
    if (this.constructor !== Man) {
        return new Man(options);
    }

    // private variables 私有变量
    var fullname, 
        gender;

    // privilege functions 特权函数
    this.setFullname = function (_name) {
        fullname = _name;
    }
    this.setGender = function (_gender) {
        gender = _gender;
    }
    this.getFullname = function () {
        return fullname || '&lt;用户未输入&gt;';
    }
    this.getGender = function () {
        return gender || '&lt;用户未输入&gt;';
    }

    this.attr(options);
}
</code></pre>

<p>再在<code>Man.prototype</code>中定义<code>attr</code>,<code>words</code>,<code>say</code>方法。</p>

<p>第三个比较麻烦的是<code>attr</code>方法，它可以接受多种参数形式。不过只需要对参数个数的类型作判断分情况处理就可以了。还需注意的是，我们的fullname和gender都是需要用setter，getter来操作的，其他值直接通过this的属性读写。当attr的参数中有这两个特殊情况时也要分开处理。</p>

<p>答案代码：<a href="/demos/ex/sohu/ex2.html">soho/ex2.html</a></p></li>
</ul>


            <hr>
            <p>尊重作者，所有原创文章，请注明出处。本站转载的文章请注明原文出处，谢谢！</p>
            <em>
                
            </em> 
        </div>
        <div class="box-footer">
            <div id="disqus_thread"></div>
            <script src="http://disqus.com/forums/mmnn/embed.js"></script>
        </div>
    </div>  
</div>
        </section>
        <footer>
            <p>
                <small>
                    Hosted on GitHub Pages &mdash;
                    Theme by 
                    <a href="https://github.com/naiteluo">naiteluo</a> 
                </small>
            </p>
        </footer>
    </div>
    <!-- baidu tongji -->
    <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F8ea0975679121e289f7ea751023fb0c4' type='text/javascript'%3E%3C/script%3E"));
</script>

</body>
</html>